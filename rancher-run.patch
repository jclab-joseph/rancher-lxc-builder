--- a.sh	2022-09-07 21:35:34.233449223 +0900
+++ b.sh	2022-09-07 21:39:10.417716706 +0900
@@ -1,11 +1,3 @@
-#!/bin/bash
-
-set -e
-
-if [ ! -e /run/secrets/kubernetes.io/serviceaccount ] && [ ! -e /dev/kmsg ]; then
-    echo "ERROR: Rancher must be ran with the --privileged flag when running outside of Kubernetes"
-    exit 1
-fi
 rm -f /var/lib/rancher/k3s/server/cred/node-passwd
 if [ -e /var/lib/rancher/management-state/etcd ] && [ ! -e /var/lib/rancher/k3s/server/db/etcd ]; then
   mkdir -p /var/lib/rancher/k3s/server/db
@@ -30,4 +22,4 @@
 if [ -x "$(command -v c_rehash)" ]; then
   c_rehash
 fi
-exec tini -- rancher --http-listen-port=80 --https-listen-port=443 --audit-log-path=${AUDIT_LOG_PATH} --audit-level=${AUDIT_LEVEL} --audit-log-maxage=${AUDIT_LOG_MAXAGE} --audit-log-maxbackup=${AUDIT_LOG_MAXBACKUP} --audit-log-maxsize=${AUDIT_LOG_MAXSIZE} "${@}"
+exec rancher --http-listen-port=80 --https-listen-port=443 --audit-log-path=${AUDIT_LOG_PATH} --audit-level=${AUDIT_LEVEL} --audit-log-maxage=${AUDIT_LOG_MAXAGE} --audit-log-maxbackup=${AUDIT_LOG_MAXBACKUP} --audit-log-maxsize=${AUDIT_LOG_MAXSIZE} "${@}"
